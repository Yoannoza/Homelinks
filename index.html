<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homelinks</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">

</head>
<body>
    <div style = " width: 100vw; margin: 0;" class="container">
        <div style = "height: 100vh; width: 100vw; margin: 0;" class="row">
            <div class="col-6">
                <div style=" height: 20%; margin-bottom: 100px; margin-left: 10px" class="row">
                    <div style = "width: 35%"  class="card">
                        <h1 style="margin-bottom: 20px" class="fw-700 bree-serif "> Hello, AIOT Guys</h1>
                        <h3 class="fw-600 noto-serif" style="font-size: 20; ">Homelinks, Votre Maison Connectée</h3>
                    </div>
                </div>
                <div style=" height: 55%; " class="row">
                    <h3 class="noto-serif" style = "font-weight: 800; color: white; font-size: 38px; margin-left: 40px;" >Lampes </h3>
                    <div style = "width: 45%"  class="card">
                        <div style="margin-left: 20px" class="row">
                            <div  class="col-4">
                                <input id="salon" type="checkbox" onchange="switchLED(this)"/>
                                <label class="switch" for="salon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="slider">
                                    <path
                                    d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V256c0 17.7 14.3 32 32 32s32-14.3 32-32V32zM143.5 120.6c13.6-11.3 15.4-31.5 4.1-45.1s-31.5-15.4-45.1-4.1C49.7 115.4 16 181.8 16 256c0 132.5 107.5 240 240 240s240-107.5 240-240c0-74.2-33.8-140.6-86.6-184.6c-13.6-11.3-33.8-9.4-45.1 4.1s-9.4 33.8 4.1 45.1c38.9 32.3 63.5 81 63.5 135.4c0 97.2-78.8 176-176 176s-176-78.8-176-176c0-54.4 24.7-103.1 63.5-135.4z"
                                    ></path>
                                </svg>
                                </label>

                                <h3 style = "font-weight: 800; margin-top: 10px; margin-left: 20px;" class="fs-3 noto-serif">Salon</h3>
                            </div>

                            <div  class="col-4">
                                <input id="cuisine" type="checkbox" onchange="switchLED(this)"/>
                                <label class="switch" for="cuisine">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="slider">
                                    <path
                                    d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V256c0 17.7 14.3 32 32 32s32-14.3 32-32V32zM143.5 120.6c13.6-11.3 15.4-31.5 4.1-45.1s-31.5-15.4-45.1-4.1C49.7 115.4 16 181.8 16 256c0 132.5 107.5 240 240 240s240-107.5 240-240c0-74.2-33.8-140.6-86.6-184.6c-13.6-11.3-33.8-9.4-45.1 4.1s-9.4 33.8 4.1 45.1c38.9 32.3 63.5 81 63.5 135.4c0 97.2-78.8 176-176 176s-176-78.8-176-176c0-54.4 24.7-103.1 63.5-135.4z"
                                    ></path>
                                </svg>
                                </label>

                                <h3 style = "font-weight: 800; margin-top: 10px; margin-left: 10px;" class="fs-3 noto-serif">Cuisine</h3>
                            </div>
                            
                            <div class="col-4">
                                <input id="chambre" type="checkbox" onchange="switchLED(this)"/>
                                <label class="switch" for="chambre">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="slider">
                                    <path
                                    d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V256c0 17.7 14.3 32 32 32s32-14.3 32-32V32zM143.5 120.6c13.6-11.3 15.4-31.5 4.1-45.1s-31.5-15.4-45.1-4.1C49.7 115.4 16 181.8 16 256c0 132.5 107.5 240 240 240s240-107.5 240-240c0-74.2-33.8-140.6-86.6-184.6c-13.6-11.3-33.8-9.4-45.1 4.1s-9.4 33.8 4.1 45.1c38.9 32.3 63.5 81 63.5 135.4c0 97.2-78.8 176-176 176s-176-78.8-176-176c0-54.4 24.7-103.1 63.5-135.4z"
                                    ></path>
                                </svg>
                                </label>

                                <h3 style = "font-weight: 800; margin-top: 10px; margin-left: 0px;" class="fs-3 noto-serif">Chambre</h3>
                            </div>

                            <div style="margin-left: 100px;" class="col-4">
                                <input id="exterieur" type="checkbox" onchange="switchLED(this)"/>
                                <label class="switch" for="exterieur">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="slider">
                                    <path
                                    d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V256c0 17.7 14.3 32 32 32s32-14.3 32-32V32zM143.5 120.6c13.6-11.3 15.4-31.5 4.1-45.1s-31.5-15.4-45.1-4.1C49.7 115.4 16 181.8 16 256c0 132.5 107.5 240 240 240s240-107.5 240-240c0-74.2-33.8-140.6-86.6-184.6c-13.6-11.3-33.8-9.4-45.1 4.1s-9.4 33.8 4.1 45.1c38.9 32.3 63.5 81 63.5 135.4c0 97.2-78.8 176-176 176s-176-78.8-176-176c0-54.4 24.7-103.1 63.5-135.4z"
                                    ></path>
                                </svg>
                                </label>

                                <h3 style = "font-weight: 800; margin-top: 10px; margin-left: 0px;" class="fs-3 noto-serif">Extérieur</h3>
                            </div>

                            <div style="margin-left: 25px;" class="col-4">
                                <input id="garage" type="checkbox" onchange="switchLED(this)"/>
                                <label class="switch" for="garage">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="slider">
                                    <path
                                    d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V256c0 17.7 14.3 32 32 32s32-14.3 32-32V32zM143.5 120.6c13.6-11.3 15.4-31.5 4.1-45.1s-31.5-15.4-45.1-4.1C49.7 115.4 16 181.8 16 256c0 132.5 107.5 240 240 240s240-107.5 240-240c0-74.2-33.8-140.6-86.6-184.6c-13.6-11.3-33.8-9.4-45.1 4.1s-9.4 33.8 4.1 45.1c38.9 32.3 63.5 81 63.5 135.4c0 97.2-78.8 176-176 176s-176-78.8-176-176c0-54.4 24.7-103.1 63.5-135.4z"
                                    ></path>
                                </svg>
                                </label>

                                <h3 style = "font-weight: 800; margin-top: 10px; margin-left: 10px;" class="fs-3 noto-serif">Garage</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="height: 45%; margin-left: 0px; margin-bottom: 100px" class="row">
                    <h3 class="noto-serif" style = "font-weight: 800; color: white; font-size: 38px; margin-left: 10px;" >Détecteurs Sensoriels </h3>
                    <div style = "width: 38%; ;" class="card">
                        <div class="row text-center">
                            <div class="col text-center">
                                <div style="margin-left: 80px; margin-bottom: 10px;" class="containerc">
                                    <input id="presence" type="checkbox">
                                     <label class="buttonc" for="presence">
                                      <span class="icon">
                                       <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill="#000000" d="M70.533 100.452c-22.862 27.542-36.27 64.923-37.766 96.702-.9 19.145 9.6 42.616 25.276 61.47 15.674 18.855 36.465 32.678 51.753 35.028 11.256.74 19.522-9.182 25.182-16.5 9.537-12.442 19.204-30.678 29.36-49.014 10.155-18.336 20.77-36.82 33.798-50.467 13.028-13.645 30.24-22.73 49.442-17.89 3.34 1.09 3.565 1.663 12.38 8.788 12.605 10.736 26.244 21.81 41.694 39.33l3.803 3.486 10.238-6.06c-20.92-23.726-38.623-51.403-57.006-76.168-27.153-36.58-54.84-65.76-94.205-69.893-36.138-3.317-74.585 18.428-93.95 41.19zm266.053-2.414c-3.507.063-7.26.632-11.217 1.733-7.08 1.97-14.577 5.722-21.718 11.09l60.545 12.47c-.844-8.415-4.142-15.068-9.524-19.503-4.425-3.646-10.055-5.63-16.6-5.785-.49-.01-.987-.013-1.487-.004zm12.787 33.34l-6.83 15.805 18.148 9.95zm-51.254 21.785c9.177 12.81 18.397 25.33 28.04 36.72 7.273-4.386 14.418-10.424 20.662-18a86.045 86.045 0 0 0 2.713-3.49zm-62.702 23.266c-8.527.283-15.98 4.993-24.262 13.67-29.706 32.65-56.175 92.534-24.877 134.35 11.81 14.805 71.805 33.64 129.122 34.264 38.29 26.563 62.975 62.86 93.86 94.36 18.564-26.89 34.903-54.124 70.025-78.467L459.423 361.2c-26.72 8.057-36.142 26.154-50.656 41.217-18.296-25.715-41.06-49.166-65.555-69.527-17.72-14.73-38.605-25.1-58.11-37.434 2.437-.69-6.538-19.77-7.556-21.99-29.352-7.035-49.364-22.817-62.138-39.367l14.25-11c13.5 17.492 35.288 33.754 73.69 35.933 19.65-2.818 29.578-6.955 35.335-11.704 5.626-4.64 8.615-10.964 12.895-20.618 1.095-6.312-.25-7.85-2.84-10.1-1.95-1.696-5.246-3.2-8.787-4.732l-39.023 23.104-4.886-6.094c-17.46-21.77-31.722-33.02-46.578-45.623-3.633-3.94-7.452-6.648-12.324-6.836a25 25 0 0 0-1.72 0zM109.8 312.53c-20.436 15.367-42.69 27.405-71.017 28.307l2.978 27.315 58.107-18.873c19.65 23.613 32.977 51.093 65.314 68.364 37.673-12.64 57.61-32.233 77.46-50.98-21.403-6.467-42.72-14.485-61.496-24.495l-14.232 34.423z"></path></g></svg>
                                     </span> 
                                     </label> 
                                  </div>

                                  <h3 class="noto-serif" style = "font-weight: 700; color: white; font-size: 28px; margin-left: 10px;" >Détecteur de Présence

                                  </h3>
                            </div>

                            <div class="col">
                                <div style="margin-left: 80px; margin-bottom: 10px;" class="containerc">
                                    <input id="smoke" type="checkbox">
                                     <label class="buttonc" for="smoke">
                                      <span class="icon">
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0284 1.11813C9.69728 1.2952 9.53443 1.61638 9.49957 1.97965C9.48456 2.15538 9.46201 2.32986 9.43136 2.50363C9.3663 2.87248 9.24303 3.3937 9.01205 3.98313C8.5513 5.15891 7.67023 6.58926 5.96985 7.65195C3.57358 9.14956 2.68473 12.5146 3.06456 15.527C3.45234 18.6026 5.20871 21.7903 8.68375 22.9486C9.03 23.0641 9.41163 22.9817 9.67942 22.7337C10.0071 22.4303 10.0238 22.0282 9.94052 21.6223C9.87941 21.3244 9.74999 20.5785 9.74999 19.6875C9.74999 19.3992 9.76332 19.1034 9.79413 18.8068C10.3282 20.031 11.0522 20.9238 11.7758 21.5623C12.8522 22.5121 13.8694 22.8574 14.1722 22.9466C14.402 23.0143 14.6462 23.0185 14.8712 22.9284C17.5283 21.8656 19.2011 20.4232 20.1356 18.7742C21.068 17.1288 21.1993 15.3939 20.9907 13.8648C20.7833 12.3436 20.2354 10.9849 19.7537 10.0215C19.3894 9.29292 19.0534 8.77091 18.8992 8.54242C18.7101 8.26241 18.4637 8.04626 18.1128 8.00636C17.8332 7.97456 17.5531 8.06207 17.3413 8.24739L15.7763 9.61686C15.9107 7.44482 15.1466 5.61996 14.1982 4.24472C13.5095 3.24609 12.7237 2.47913 12.1151 1.96354C11.8094 1.70448 11.5443 1.50549 11.3525 1.36923C11.2564 1.30103 11.1784 1.24831 11.1224 1.21142C10.7908 0.99291 10.3931 0.923125 10.0284 1.11813ZM7.76396 20.256C7.75511 20.0744 7.74999 19.8842 7.74999 19.6875C7.75 18.6347 7.89677 17.3059 8.47802 16.0708C8.67271 15.6572 8.91614 15.254 9.21914 14.8753C9.47408 14.5566 9.89709 14.4248 10.2879 14.5423C10.6787 14.6598 10.959 15.003 10.9959 15.4094C11.2221 17.8977 12.2225 19.2892 13.099 20.0626C13.5469 20.4579 13.979 20.7056 14.292 20.8525C15.5 20.9999 17.8849 18.6892 18.3955 17.7882C19.0569 16.6211 19.1756 15.356 19.0091 14.1351C18.8146 12.7092 18.2304 11.3897 17.7656 10.5337L14.6585 13.2525C14.3033 13.5634 13.779 13.5835 13.401 13.3008C13.023 13.018 12.8942 12.5095 13.092 12.0809C14.4081 9.22933 13.655 6.97987 12.5518 5.38019C12.1138 4.74521 11.6209 4.21649 11.18 3.80695C11.0999 4.088 10.9997 4.39262 10.8742 4.71284C10.696 5.16755 10.4662 5.65531 10.1704 6.15187C9.50801 7.26379 8.51483 8.41987 7.02982 9.34797C5.57752 10.2556 4.71646 12.6406 5.04885 15.2768C5.29944 17.2643 6.20241 19.1244 7.76396 20.256Z" fill="#0F0F0F"></path> </g></svg>                                     </span> 
                                     </label> 
                                  </div>

                                  <h3 class="noto-serif" style = "font-weight: 700; color: white; font-size: 28px; margin-left: 10px; " >Détecteur de Fumée</h3>
                            </div>
                            <div class="col">
                                <div style="margin-left: 220px; margin-bottom: 10px;" class="containerc">
                                    <input id="auth" type="checkbox">
                                     <label id="buttonc" class="buttonc" for="auth">
                                        <svg class = "icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="m 8.074219 0 c -1.203125 -0.0117188 -2.40625 0.285156 -3.492188 0.890625 c -0.480469 0.269531 -0.652343 0.878906 -0.382812 1.359375 c 0.269531 0.484375 0.878906 0.65625 1.359375 0.386719 c 1.550781 -0.867188 3.4375 -0.847657 4.972656 0.050781 c 1.53125 0.898438 2.46875 2.535156 2.46875 4.3125 v 1 c 0 0.550781 0.449219 1 1 1 s 1 -0.449219 1 -1 v -1 c 0 -0.019531 0 -0.039062 -0.003906 -0.054688 c -0.019532 -2.460937 -1.332032 -4.738281 -3.457032 -5.984374 c -1.070312 -0.628907 -2.265624 -0.9492192 -3.46875 -0.960938 z m -5.199219 2.832031 c -0.066406 0 -0.132812 0.007813 -0.195312 0.023438 c -0.257813 0.058593 -0.484376 0.21875 -0.625 0.445312 c -0.6875 1.109375 -1.054688 2.390625 -1.054688 3.699219 v 5.0625 c 0 0.550781 0.449219 1 1 1 s 1 -0.449219 1 -1 v -5.0625 c 0 -0.933594 0.261719 -1.851562 0.753906 -2.644531 c 0.292969 -0.46875 0.148438 -1.082031 -0.320312 -1.375 c -0.167969 -0.105469 -0.363282 -0.15625 -0.558594 -0.148438 z m 5.125 0.167969 c -2.199219 0 -4 1.800781 -4 4 v 1 c 0 0.550781 0.449219 1 1 1 s 1 -0.449219 1 -1 v -1 c 0 -1.117188 0.882812 -2 2 -2 s 2 0.882812 2 2 v 5 s 0.007812 0.441406 0.175781 0.941406 s 0.5 1.148438 1.117188 1.765625 c 0.390625 0.390625 1.023437 0.390625 1.414062 0 s 0.390625 -1.023437 0 -1.414062 c -0.382812 -0.382813 -0.550781 -0.734375 -0.632812 -0.984375 s -0.074219 -0.308594 -0.074219 -0.308594 v -5 c 0 -2.199219 -1.800781 -4 -4 -4 z m 0 3 c -0.550781 0 -1 0.449219 -1 1 v 5 s 0 0.59375 0.144531 1.320312 c 0.144531 0.726563 0.414063 1.652344 1.148438 2.386719 c 0.390625 0.390625 1.023437 0.390625 1.414062 0 s 0.390625 -1.023437 0 -1.414062 c -0.265625 -0.265625 -0.496093 -0.839844 -0.601562 -1.363281 c -0.105469 -0.523438 -0.105469 -0.929688 -0.105469 -0.929688 v -5 c 0 -0.550781 -0.449219 -1 -1 -1 z m -3 4 c -0.550781 0 -1 0.449219 -1 1 v 3 c 0 0.550781 0.449219 1 1 1 s 1 -0.449219 1 -1 v -3 c 0 -0.550781 -0.449219 -1 -1 -1 z m 9 0 c -0.550781 0 -1 0.449219 -1 1 s 0.449219 1 1 1 s 1 -0.449219 1 -1 s -0.449219 -1 -1 -1 z m 0 0" fill="#2e3434"></path> </g></svg>
                                     </label> 
                                  </div>

                                  <h3 class="noto-serif" style = "font-weight: 700; color: white; font-size: 28px; margin-left: 10px;" >Authentification par Cartes </h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div style=" height: 15%; margin-left: 0px; " class="row">
                    <div style = "width: 40%" class="card text-center">
                        <h3 class="noto-serif" style = "font-weight: 700; color: white; font-size: 28px; margin-left: 10px;" >Réveil de la Chambre</h3>
                        <form id="alarmForm">
                            <input type="time" class="form-control" id="alarmTime" required value="10:05 AM" style="font-size: 28px; font-weight: 700; color: black;" />
                            <button type="submit" class="btn">Programmer</button>
                            <p id="status"></p>
                          </form>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div style=" height: 25%; margin-left: 40px; margin-top: 40px;" class="row">
                    <div style="margin-top: 20px;" class="clock col-6">
                        <div class="hour">
                            <div class="hr" id="hr"></div>
                        </div>

                        <div class="min">
                            <div class="mn" id="mn"></div>
                        </div>

                        <div class="sec">
                            <div class="sc" id="sc"></div>
                        </div>

                    </div>

                    <div style="margin-left: 70px;"class="col-6">
                        <div class="display-date">
                            <span id="day">day</span>,
                            <span id="daynum">00</span>
                            <span id="month">month</span>
                            <span id="year">0000</span>
                        </div>
                        <div class="display-time"></div>
                    </div>

                </div>
                <div style=" height: 45%; margin-left: 70px; margin-bottom: 50px;" class="row text-center">
                    <div style = "width: 35%" class="card ">
                        <div class="row">
                            <div class="col">
                                <h3 class="noto-serif" style = "font-weight: 700; color: white; font-size: 28px; margin-left: 10px;" >Température </h3>
                                <div id="gauge_temp" class="gauge-container three">
                                </div>
                            </div>
                            <div class="col">
                                <h3 class="noto-serif" style = "font-weight: 700; color: white; font-size: 28px; margin-left: 10px;" >Humidité </h3>
                                <div id="gauge_hum" class="gauge-container three">

                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div style="height: 25%; margin-left: 70px" class="row">
                    <h3 class="noto-serif" style = "font-weight: 800; color: white; font-size: 38px; margin-left: 40px;" >Sécurité </h3>
                    <div style = "width: 38%; " class="card">
                        <div class="row text-center">
                            <div class="col text-center">
                                
                                <div class="wrapperd" id="d1" onclick="toggleDoors1()">
                                    <img src="https://images.pexels.com/photos/276724/pexels-photo-276724.jpeg?cs=srgb&dl=pexels-pixabay-276724.jpg&fm=jpg" alt="minion">
                                    <div id="left-door1" class="door">
                                        <div class="shape"></div>
                                        <div class="shape"></div>
                                        <div id="left-knob" class="knob"></div>
                                    </div>
                                    <div id="right-door1" class="door">
                                        <div class="shape"></div>
                                        <div class="shape"></div>
                                        <div id="right-knob" class="knob"></div>
                                    </div>
                                </div>
                                <h3 class="noto-serif" style = "font-weight: 700; color: white; font-size: 38px; margin-top: 30px;" >Entrée </h3>

                            </div>

                            <div class="col text-center">
                                
                                <div class="wrapperd" id="d2" onclick="toggleDoors2()">
                                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS-gHRKbPfAPUlJjXVoO5kZOD0PCVhfWqv0Zg&s" alt="minion">
                                    <div id="left-door2" class="door">
                                        <div class="shape"></div>
                                        <div class="shape"></div>
                                        <div id="left-knob" class="knob"></div>
                                    </div>
                                    <div id="right-door2" class="door">
                                        <div class="shape"></div>
                                        <div class="shape"></div>
                                        <div id="right-knob" class="knob"></div>
                                    </div>
                                </div>
                                <h3 class="noto-serif" style = "font-weight: 700; color: white; font-size: 38px; margin-top: 30px;" >Garage </h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <button id="record-button" >
        <svg viewBox="0 0 48 48" id="b" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF" stroke="#FFFFFF" stroke-width="3.6480000000000006"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <defs> <style>.i{fill:none;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;}</style> </defs> <g id="c"> <line id="d" class="i" x1="23.8199" y1="3.5" x2="23.8199" y2="44.5"></line> <line id="e" class="i" x1="16.5899" y1="11.9828" x2="16.5899" y2="36.0172"></line> <line id="f" class="i" x1="9.3736" y1="19.7587" x2="9.3736" y2="28.2413"></line> <line id="g" class="i" x1="31.0986" y1="11.9828" x2="31.0986" y2="36.0172"></line> <line id="h" class="i" x1="38.6264" y1="19.7587" x2="38.6264" y2="28.2413"></line> </g> </g></svg>
    </button>
    <div class="wrapper" id="loader">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="shadow"></div>
        <div class="shadow"></div>
        <div class="shadow"></div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>
    
    <p id="transcript"></p>
    <script type="text/javascript" src="js/gauge.js"> </script>
    <script>
        const displayTime = document.querySelector(".display-time");
        // Time
        function showTime() {
        let time = new Date();
        displayTime.innerText = time.toLocaleTimeString("en-US", { hour12: false });
        setTimeout(showTime, 1000);
        }

        showTime();

        // Date
        function updateDate() {
        let today = new Date();

        // return number
        let dayName = today.getDay(),
            dayNum = today.getDate(),
            month = today.getMonth(),
            year = today.getFullYear();

        const months = [
            "Janvier",
            "Février",
            "Mars",
            "Avril",
            "Mai",
            "Juin",
            "Juillet",
            "Août",
            "Septembre",
            "Octobre",
            "Novembre",
            "Décembre",
        ];
        const dayWeek = [
            "Dimanche",
            "Lundi",
            "Mardi",
            "Mercredi",
            "Jeudi",
            "Vendredi",
            "Samedi",
        ];
        // value -> ID of the html element
        const IDCollection = ["day", "daynum", "month", "year"];
        // return value array with number as a index
        const val = [dayWeek[dayName], dayNum, months[month], year];
        for (let i = 0; i < IDCollection.length; i++) {
            document.getElementById(IDCollection[i]).firstChild.nodeValue = val[i];
        }
        }

        updateDate();


        const deg = 6;
        const hr = document.querySelector('#hr');
        const mn = document.querySelector('#mn');
        const sc = document.querySelector('#sc');
        
        setInterval(() =>{
            
             let day = new Date();
        let hh = day.getHours() * 30;
        let mm = day.getMinutes() * deg;
        let ss = day.getSeconds() * deg;
        
        hr.style.transform = `rotateZ(${(hh)+(mm/12)}deg)`;
        mn.style.transform = `rotateZ(${mm}deg)`;
        sc.style.transform = `rotateZ(${ss}deg)`;
            
        })
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const apiBaseUrl = 'http://your-esp32-ip-address'; // Remplacez par l'adresse IP de votre ESP32
        
            // Fonction pour envoyer des requêtes POST à l'ESP32
            function sendRequest(endpoint, data) {
                fetch(`${apiBaseUrl}/${endpoint}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                }).then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                }).then(data => {
                    console.log('Success:', data);
                }).catch(error => {
                    console.error('Error:', error);
                });
            }
        
            // Fonction pour gérer les changements d'état des interrupteurs
            function switchLED(checkbox) {
                const id = checkbox.id;
                const state = checkbox.checked;
                sendRequest('setLED', { id, state });
            }
        
            // Fonction pour gérer la soumission du formulaire de programmation de l'alarme
            document.getElementById('alarmForm').addEventListener('submit', (event) => {
                event.preventDefault();
                const alarmTime = document.getElementById('alarmTime').value;
                sendRequest('setAlarm', { time: alarmTime });
                document.getElementById('status').innerText = `Alarm set for ${alarmTime}`;
            });
        
            // Fonction pour gérer les détecteurs sensoriels
            document.getElementById('presence').addEventListener('change', () => {
                const state = document.getElementById('presence').checked;
                sendRequest('setSensor', { sensor: 'presence', state });
            });
        
            document.getElementById('smoke').addEventListener('change', () => {
                const state = document.getElementById('smoke').checked;
                sendRequest('setSensor', { sensor: 'smoke', state });
            });
        });
        
    </script>
    <script>

        function toggleDoors1() {
            var wrapper1 = document.getElementById('d1');
            wrapper1.classList.toggle('open');
            switchMotor(wrapper.classList.contains('open') ? 'on' : 'off');
        }

        function toggleDoors2() {
            var wrapper2 = document.getElementById('d2');
            wrapper2.classList.toggle('open');
            switchMotor(wrapper.classList.contains('open') ? 'on' : 'off');
        }

        function switchMotor(state) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    console.log(this.responseText);
                }
            };
            xhttp.open("GET", "http://127.0.0.1:5500/motor/" + state, true);
            xhttp.send();
        }

        var gauge_temp = Gauge(
        document.getElementById("gauge_temp"),{
            label: function(value) {
            return value + "°C";
            },
          max: 100,
          value: 0,
        }
      );

      var gauge_hum = Gauge(
        document.getElementById("gauge_hum"),{
            label: function(value) {
                return value + "%";
                },
          max: 100,
          value: 0
        }
      );

      let temp = "";
      let hum = "";

      temp = "10°C";
      hum = "90%";

      setInterval(function () {
        gauge_temp.setValueAnimated(Math.floor(Math.random() * (45 - 35 + 1)) + 35, 100);
    }, 3000); // Intervalle de 10 secondes


      setInterval(function () {
        gauge_hum.setValueAnimated(Math.floor(Math.random() * (90 - 70 + 1)) + 70, 100);
    }, 3000);

    </script>
    <script>
        let chunks = [];
        let recorder;

        document.getElementById('record-button').onmousedown = () => {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('loader').style.display = 'flex';
            document.getElementById('record-button').style.zIndex = '150';
        navigator.mediaDevices.getUserMedia({ audio: true })
            .then(stream => {
            recorder = new MediaRecorder(stream);
            recorder.ondataavailable = e => chunks.push(e.data);
            recorder.onstop = saveRecording;
            recorder.start();
            });
        };

        document.getElementById('record-button').onmouseup = () => {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('loader').style.display = 'none';
            document.getElementById('record-button').style.zIndex = '';
        recorder.stop();
        };

        function saveRecording() {
        const blob = new Blob(chunks, { type: 'audio/wav' });
        chunks = [];
        const audioURL = URL.createObjectURL(blob);
        sendAudioToServer(blob);
        }

        function sendAudioToServer(blob) {
            const formData = new FormData();
            formData.append('audio', blob);
        
            fetch('http://127.0.0.1:5000/transcribe', {
            method: 'POST',
            body: formData
            })
            .then(response => response.json())
            .then(data => handleTranscription(data.transcription));
        }

        function handleTranscription(transcription) {
            let states = get_State();
            let all_states = get_All_State();
            fetch('http://127.0.0.1:5000/process', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ text: transcription, state: states, all_state: all_states})
            })
            .then(response => response.json())
            .then(data => executeCommands(data.commands));
        }

            function executeCommands(json) {
                // Parse le JSON en objet JavaScript
                const etats = JSON.parse(json);

                // Vérifier si l'ID 'audio' est true et exécuter des instructions spécifiques
                if (etats['audio'] == true) {
                    const audio = new Audio(`http://127.0.0.1:5000/audio`);
                    audio.play();
                }

                // Vérifier si l'ID 'audio' est true et exécuter des instructions spécifiques
                if (etats['alarm']) {
                    document.getElementById("alarmTime").value = etats['alarm'];
                }

                // Vérifier si l'ID 'audio' est true et exécuter des instructions spécifiques
                var wrapper1 = document.getElementById('d1');
                if ((etats['door1']==="on" && wrapper1.classList.contains('open')) || (etats['door1']==="off" && !wrapper1.classList.contains('open'))){
                    console.log(" ")
                }else{
                    wrapper1.classList.toggle('open');
                }

                // Vérifier si l'ID 'audio' est true et exécuter des instructions spécifiques
                var wrapper2 = document.getElementById('d2');
                if ((etats['door2']==="on" && wrapper2.classList.contains('open')) || (etats['door2']==="off" && !wrapper2.classList.contains('open'))){
                    console.log(" ")
                }else{
                    wrapper2.classList.toggle('open');
                }

                // Convertir l'objet en un tableau d'entrées [clé, valeur]
                const entries = Object.entries(etats);

                // Parcourir les entrées
                for (let i = 0; i < entries.length ; i++) {
                    const [id, checked] = entries[i];
                    const checkbox = document.getElementById(id);
                    if (checkbox) {
                        checkbox.checked = checked;
                    }
                }

                
            }

            function get_All_State() {
                // Crée un objet pour stocker l'état des checkboxes
                const etats = {};
    
                // Liste des IDs des checkboxes
                const ids = ['salon', 'cuisine', 'chambre', 'exterieur', 'garage', 'smoke', 'presence', 'auth'];
    
                // Parcoure chaque ID et met à jour l'objet 'etats' avec l'état actuel des checkboxes
                ids.forEach(id => {
                    const checkbox = document.getElementById(id);
                    if (checkbox) {
                        etats[id] = checkbox.checked;
                    }else{
                        etats[id] = false;
                    }
                });

                etats['temp'] = temp;
                etats['hum'] = hum;

                var wrapper1 = document.getElementById('d1');
                if (wrapper1.classList.contains('open')){
                    etats['door1'] = "on";
                }else{
                    etats['door1'] = "off";
                }

                var wrapper2 = document.getElementById('d2');
                if (wrapper2.classList.contains('open')){
                    etats['door2'] = "on";
                }else{
                    etats['door2'] = "off";
                }


                etats['time'] = document.querySelector(".display-time").textContent + document.querySelector(".display-date").textContent
    
                // Convertit l'objet 'etats' en chaîne JSON
                let etatsJson = JSON.stringify(etats);
    
                // Supprime le premier et dernier caractère pour enlever les accolades {}
                etatsJson = etatsJson.slice(1, -1);
    
                // Retourne la chaîne JSON modifiée
                return etatsJson;
                }

            // Fonction pour appliquer l'état des checkboxes à partir d'un JSON
        function get_State() {
            // Crée un objet pour stocker l'état des checkboxes
            const etats = {};

            // Liste des IDs des checkboxes
            const ids = ['salon', 'cuisine', 'chambre', 'exterieur', 'garage'];

            // Parcoure chaque ID et met à jour l'objet 'etats' avec l'état actuel des checkboxes
            ids.forEach(id => {
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    etats[id] = checkbox.checked;
                }else{
                    etats[id] = false;
                }
            });

            var wrapper1 = document.getElementById('d1');
            if (wrapper1.classList.contains('open')){
                etats['door1'] = "on";
            }else{
                etats['door1'] = "off";
            }

            var wrapper2 = document.getElementById('d2');
            if (wrapper2.classList.contains('open')){
                etats['door2'] = "on";
            }else{
                etats['door2'] = "off";
            }


            // Convertit l'objet 'etats' en chaîne JSON
            let etatsJson = JSON.stringify(etats);

            // Supprime le premier et dernier caractère pour enlever les accolades {}
            etatsJson = etatsJson.slice(1, -1);

            // Retourne la chaîne JSON modifiée
            return etatsJson;
            }
        

    </script>
    <!-- <script>
        function switchLED(checkbox) {
            var state = checkbox.checked ? 'on' : 'off';
            var endpoint = checkbox.id;
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", "http://127.0.0.1:5500/" + endpoint + "/" + state, true);
            xhttp.send();
        }

        document.getElementById(" alarmForm").addEventListener("submit", function (event) {
            event.preventDefault();
            var alarmTime = document.getElementById("alarmTime").value;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "http://127.0.0.1:5500/set-alarm", true);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.send("alarmTime=" + encodeURIComponent(alarmTime));
            document.getElementById("status").innerText = "Alarme programmée pour " + alarmTime;
        });

        function checkSensorStatus() {
            checkRFIDStatus();
            checkPresenceStatus();
            checkSmokeStatus();
        }

        
        function checkRFIDStatus() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    const button = document.getElementById('.buttonc');
                        if (this.responseText == "RFID triggered") {
                            button.style.backgroundColor = 'rgb(17, 255, 17)'; // Green color
                            button.style.boxShadow = '0px 0px 1px rgb(17, 255, 17) inset, ' +
                                                    '0px 0px 2px rgb(17, 255, 17) inset, ' +
                                                    '0px 0px 10px rgb(17, 255, 17) inset, ' +
                                                    '0px 0px 40px rgb(17, 255, 17), ' +
                                                    '0px 0px 100px rgb(17, 255, 17), ' +
                                                    '0px 0px 5px rgb(17, 255, 17)';
                        } else {
                            button.style.backgroundColor = 'rgb(255, 17, 17)'; // Red color
                            button.style.boxShadow = '0px 0px 1px rgb(255, 17, 17) inset, ' +
                                                    '0px 0px 2px rgb(255, 17, 17) inset, ' +
                                                    '0px 0px 10px rgb(255, 17, 17) inset, ' +
                                                    '0px 0px 40px rgb(255, 17, 17), ' +
                                                    '0px 0px 100px rgb(255, 17, 17), ' +
                                                    '0px 0px 5px rgb(255, 17, 17)';
                        }
                }
            };
            xhttp.open("GET", "http://127.0.0.1:5500/check-rfid", true);
            xhttp.send();
        }
        
        function checkPresenceStatus() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    if (this.readyState == 4 && this.status == 200) {
                    if(this.responseText == "Presence detected"){

                    }
                    if(this.responseText == "No presence detected"){
                        
                    }
                }
                }
            };
            xhttp.open("GET", "http://127.0.0.1:5500/check-presence", true);
            xhttp.send();
        }
        
        function checkSmokeStatus() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    if (this.readyState == 4 && this.status == 200) {
                        if(this.responseText == "Smoke detected"){
    
                        }
                        if(this.responseText == "No smoke detected"){
                            
                        }
                    }
                }
            };
            xhttp.open("GET", "http://127.0.0.1:5500/check-smoke", true);
            xhttp.send();
        }
        
        // Call checkSensorStatus periodically to update the status
        setInterval(checkSensorStatus, 500);
        
    </script> -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
</body>
</html>